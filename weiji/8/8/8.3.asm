A8255_CON EQU 0606H
A8255_A EQU 0600H
A8255_B EQU 0602H
A8255_C EQU 0604H

DATA SEGMENT
TIMES DB 06H
DATA ENDS

CODE SEGMENT
    ASSUME CS:CODE,DS:DATA
START:
    MOV AX,DATA
    MOV DS,AX
    MOV AX, OFFSET MIR6
    MOV SI, 0038H
    MOV [SI], AX
    MOV [SI], AX   
    MOV AX, CS     
    MOV SI, 003AH  
    MOV [SI], AX   
   
    CLI
    MOV AL, 11H
    OUT 20H, AL
    MOV AL, 08H
    OUT 21H, AL
    MOV AL, 04H
    OUT 21H, AL
    MOV AL, 03H
    OUT 21H, AL
    MOV AL, 2FH
    OUT 21H, AL
    STI
    MOV DX,A8255_CON
    MOV AL,80H
    OUT DX,AL
   
MAIN:
    CMP TIMES,00H
    JE EXIT
    CALL LED
    JMP MAIN
EXIT:
    MOV AL,00H
    MOV DX,A8255_B
    OUT DX,AL
    
    INT 03H
MIR6:
    DEC TIMES
   
    IRET
LED:
X2:    
    MOV BX, OFFSET TIMES
    MOV CX, [BX]
    MOV BX, 0000H
    MOV AL, 11011111B
X1: 
    MOV DX,A8255_A
    OUT DX,AL
    ROR AL,1
    PUSH AX
    MOV AL,3FH
    MOV DX,A8255_B
    OUT DX,AL
    POP AX
    CALL DELAY
    LOOP X1
    RET
DELAY:
    PUSH CX
    MOV CX,0FFH
X4:
    LOOP X4
    POP CX
    RET
CODE ENDS
     END START